on: push
jobs:
  pushed_event:
    runs-on: ubuntu-latest
    outputs:
      continue: true
    steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-go@v5
    - uses: ./.github/actions/debug
      with:
        destroy: true
    - uses: ./.github/actions/debug
      with:
        destroy: "true"
    - uses: ./.github/actions/debug
      with:
        destroy: false
    - uses: ./.github/actions/debug
      with:
        destroy: "false"
    - uses: ./.github/actions/debug
    - run: echo "foo=\"$(date +"%s")\""
    - run: go version
    - run: echo "$PATH"
    - run: touch foo.txt && sudo cp foo.txt /usr/local/bin/foo.txt
    - run: ls /usr/local/bin/
    - run: make bin-viceroy
    - run: echo foobar > some_file.txt
    - run: cat some_file.txt

  needs_pushed_event:
    needs: pushed_event
    runs-on: ubuntu-latest
    if: ${{ needs.pushed_event.outputs.continue == 'true' }}
    steps:
      - run: echo "needs_pushed_event was run"
